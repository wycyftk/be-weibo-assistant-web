import{r as u,a as o,b as m,c as b,d as t,e as N,w as n,j as f,t as P,l as U,x as I,m as i,y as L,z as S}from"./index-53910632.js";const z={class:"content"},A={key:0},K={__name:"PublishBlog",setup(D){const _=u(""),a=u(!1),p=u(""),c=u(!1),x=[{title:"序号",dataIndex:"no",key:"no",width:90},{title:"鸡汤",dataIndex:"jitang",key:"jitang"}],g=u([]),w=async function(){const e={content:_.value};if(!a.value)try{a.value=!0;const s=await I(e);s.success?i.success(s.data):i.error(s.msg)}catch(s){i.error(s)}finally{a.value=!1}},h=async function(){const r={jitang:p.value};if(!a.value)try{a.value=!0;const e=await L(r);e.success?i.success(e.msg):i.error(e.msg)}catch(e){i.error(e)}finally{a.value=!1}},k=function(){c.value=!1},j=async function(){const r=await S();g.value=r.data},C=function(){c.value=!0,j()};return(r,e)=>{const s=o("a-page-header"),y=o("a-textarea"),d=o("a-row"),v=o("a-button"),B=o("a-table"),J=o("a-modal");return m(),b("div",null,[t(s,{title:"批量发博"}),N("div",z,[t(d,null,{default:n(()=>[t(y,{value:_.value,"onUpdate:value":e[0]||(e[0]=l=>_.value=l),placeholder:"请填写发博内容",rows:4},null,8,["value"])]),_:1}),t(d,{class:"actions-bar",type:"flex",justify:"start"},{default:n(()=>[t(v,{type:"primary",disabled:a.value,loading:a.value,onClick:w},{default:n(()=>[f("发布")]),_:1},8,["disabled","loading"])]),_:1}),t(d,{style:{"margin-top":"24px"}},{default:n(()=>[t(y,{value:p.value,"onUpdate:value":e[1]||(e[1]=l=>p.value=l),placeholder:"请输入鸡汤内容",rows:4},null,8,["value"])]),_:1}),t(d,{class:"actions-bar",type:"flex",justify:"start"},{default:n(()=>[t(v,{type:"primary",disabled:a.value,loading:a.value,style:{"margin-right":"12px"},onClick:h},{default:n(()=>[f("添加鸡汤")]),_:1},8,["disabled","loading"]),t(v,{type:"primary",disabled:a.value,loading:a.value,onClick:C},{default:n(()=>[f("查看鸡汤")]),_:1},8,["disabled","loading"])]),_:1})]),t(J,{visible:c.value,"onUpdate:visible":e[2]||(e[2]=l=>c.value=l),width:"800px",title:"心灵鸡汤列表",footer:null,onCancel:k},{default:n(()=>[t(B,{style:{width:"100%"},columns:x,"data-source":g.value,rowKey:"id"},{bodyCell:n(({column:l,record:E,index:V})=>[l.key==="no"?(m(),b("span",A,P(V+1),1)):U("",!0)]),_:1},8,["data-source"])]),_:1},8,["visible"])])}}};export{K as default};
